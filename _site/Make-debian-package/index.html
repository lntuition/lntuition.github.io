<!DOCTYPE html> <html> <head> <title>간단한 Debian-Package 제작해보기 – lntuitionist – C로 시를 쓰는 바보 개발자</title> <meta charset="utf-8" /> <meta content='text/html; charset=utf-8' http-equiv='Content-Type'> <meta http-equiv='X-UA-Compatible' content='IE=edge'> <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'> <meta name="description" content="간단한 Debian-Package 제작해보기 " /> <meta property="og:description" content="간단한 Debian-Package 제작해보기 " /> <meta name="author" content="lntuitionist" /> <meta property="og:title" content="간단한 Debian-Package 제작해보기" /> <meta property="twitter:title" content="간단한 Debian-Package 제작해보기" /> <style type="text/css"> a,article,body,div,header,html,li,span,ul{margin:0;padding:0}h1{line-height:1.7;margin:1em 0 15px}a,article,body,div,footer,h1,header,html,img,li,nav,p,span,ul{border:0;font:inherit;vertical-align:baseline}h1,img,nav,p{padding:0}footer{margin:0}article,footer,header,img,nav{display:block}body,p{color:#343a40}body{font-family:"Spoqa Han Sans","Source Sans Pro","Apple SD Gothic Neo","Nanum Barun Gothic","Nanum Gothic","Verdana","Arial","Dotum",sans-serif;line-height:1.6}ul{list-style:none}*,:after,:before{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-size:18px}.container{margin:0 auto;max-width:960px;padding:0 10px;width:100%}@media screen and (max-width:640px){h1{line-height:1.4}}h1{font-weight:700;font-size:30px}h1 a{color:inherit}p{margin:15px 0}a{text-decoration:none;cursor:pointer}a,a:active,a:hover{color:#1b6ec2}ul>li:before{position:absolute;width:1.4em;margin-left:-1.4em;display:inline-block;box-sizing:border-box;text-align:right;content:"\2022";padding-right:.3em;font-family:inherit;font-size:1.4em;line-height:1.2}ul>li{margin:0 auto .4em 1.4em;line-height:1.55}img{max-width:100%;margin:0 0 1em;border-radius:5px}::-moz-selection{color:#000;background:#f1f3f5}::selection{color:#000;background:#f1f3f5}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.wrapper-masthead{margin-bottom:50px}.masthead{padding:20px 0;border-bottom:1px solid #eee}@media screen and (max-width:640px){.masthead{text-align:center}}.site-avatar{float:left;width:70px;height:70px;margin-right:15px}@media screen and (max-width:640px){.site-avatar{float:none;display:block;margin:0 auto}}.site-avatar img{border-radius:5px}.site-info{float:left}@media screen and (max-width:640px){.site-info{float:none;display:block;margin:0 auto}}.site-name{margin:0;color:#333;cursor:pointer;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:300;font-size:28px;letter-spacing:1px}.site-description{margin:-5px 0 0;color:#666;font-size:16px}@media screen and (max-width:640px){.site-description{margin:3px 0}}nav{float:right;margin:23px 0 0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:18px}@media screen and (max-width:640px){nav{float:none;margin-top:9px;display:block;font-size:16px}}nav a{margin-left:20px;color:#333;text-align:right;font-weight:300;letter-spacing:1px}@media screen and (max-width:640px){nav a{margin:0 10px;color:#4183c4}}.posts>.post{padding-bottom:2em;border-bottom:1px solid #f1f3f5}.posts>.post:last-child{padding-bottom:1em;border-bottom:none}.post h1{margin-bottom:.1em}.post .date,.post .tag{font-weight:300;font-size:14px}.post .date{color:#868e96;margin-right:3px}.post .tag{display:inline}.post .tag li:before{content:''}.post .tag li{display:inline;margin:0}.post .tag li>a{margin:3px 3px 3px 0;padding:.5px 4px;color:#343a40;background-color:#e9ecef;border-radius:3px}.post .read-more{font-size:15px}.pagination{font-weight:300;padding:2em 0;width:100%;display:inline-block}@media screen and (max-width:640px){.pagination{font-size:14px}}.wrapper-footer{margin-top:50px;border-top:1px solid #e9ecef;border-bottom:1px solid #e9ecef;background-color:#f1f3f5}footer{padding:20px 0;text-align:center}footer p{font-size:14px}footer .svg-icon{display:block;font-size:0;list-style:none;margin:0;text-align:center}footer .svg-icon li{display:inline-block;margin:10px}footer .svg-icon svg{height:30px;width:30px}@font-face{font-family:'Spoqa Han Sans';font-weight:700;src:local('Spoqa Han Sans Bold'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansBold.woff2) format('woff2'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansBold.woff) format('woff'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansBold.ttf) format('truetype')}@font-face{font-family:'Spoqa Han Sans';font-weight:400;src:local('Spoqa Han Sans Regular'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansRegular.woff2) format('woff2'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansRegular.woff) format('woff'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansRegular.ttf) format('truetype')}@font-face{font-family:'Spoqa Han Sans';font-weight:300;src:local('Spoqa Han Sans Light'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansLight.woff2) format('woff2'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansLight.woff) format('woff'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansLight.ttf) format('truetype')}@font-face{font-family:'Spoqa Han Sans';font-weight:100;src:local('Spoqa Han Sans Thin'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansThin.woff2) format('woff2'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansThin.woff) format('woff'),url(https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@01ff0283e4f36e159ffbf744b36e16ef742da6d8/Subset/SpoqaHanSans/SpoqaHanSansThin.ttf) format('truetype')} </style> <!-- Async font loading --> <script> window.WebFontConfig = { custom: { families: ['Spoqa Han Sans:100,300,400,700'], urls: ['https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css'] }, timeout: 60000 }; (function(d) { var wf = d.createElement('script'), s = d.scripts[0]; wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js'; s.parentNode.insertBefore(wf, s); })(document); </script> <!--[if lt IE 9]> <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> <![endif]--> <link rel="stylesheet" type="text/css" href="/style.css" /> <link rel="alternate" type="application/rss+xml" title="lntuitionist - C로 시를 쓰는 바보 개발자" href="/feed.xml" /> <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now --> </head> <body> <div class="wrapper-masthead"> <div class="container"> <header class="masthead clearfix"> <a href="/" class="site-avatar"><img src="https://avatars0.githubusercontent.com/u/34061042?s=460&v=4" /></a> <div class="site-info"> <h1 class="site-name"><a href="/">lntuitionist</a></h1> <p class="site-description">C로 시를 쓰는 바보 개발자</p> </div> <nav> <a href="/">Blog</a> <a href="/tags">Tags</a> <a href="https://github.com/lntuition">Github</a> </nav> </header> </div> </div> <!-- Script pointing to jekyll-search.js --> <script src="/dest/jekyll-search.min.js" type="text/javascript"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('results-container'), json: '/search.json', searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: [] }) </script> <div id="main" role="main" class="container"> <article class="post"> <h1>간단한 Debian-Package 제작해보기</h1> <div clsss="meta"> <span class="date"> 2019-08-09 </span> <ul class="tag"> <li> <a href="http://localhost:4000/tags#Debian"> Debian </a> </li> <li> <a href="http://localhost:4000/tags#Linux"> Linux </a> </li> </ul> </div> <div class="entry"> <p>간단한 Debian-Package 제작해보기</p> <hr /> <h2 id="시작하면서">시작하면서</h2> <p>업무를 하면서 Ubuntu 환경에서 돌아가는 Package를 만들어야 할 일이 생겼습니다. 습관적으로 Apt-get 을 사용해서 패키지를 당겨오고 설치만 해봤지 만들어 본적은 한번도 없었습니다. 여러 우여곡절들이 있었지만 꽤나 재미있고 신선했던 일이라서 포스팅으로 남겨볼까합니다.</p> <h2 id="control">Control</h2> <p>Control 파일은 데비안 형식의 패키지의 모든 정보를 담고 있는 파일입니다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Package: Sample Debian Package
Version: 0.0.1
Section: devel
Priority: optional
Architecture: all
Depends: python3
Maintainer : lntuition
Description : Sample debian packaging example
</code></pre></div></div> <ul> <li>Package (필수): 데비안 패키지 이름입니다.</li> <li>Version (필수): 버전명입니다.</li> <li>Section : 데비안 패키지에서는 섹션별로 control record(?)를 다르게 저장한다고 하네요. 사용할 수 있는 <a href="https://packages.debian.org/unstable/">리스트 옵션</a>은 다음과 같고, 여기서는 개발(devel) 옵션을 사용하겠습니다.</li> <li>Priority : 패키지의 우선순의를 의미합니다. required → important → standard → optional → extra 순으로 정의되어있습니다.</li> <li>Architecture (필수): 패키지가 Architecture을 의미합니다. 가장 크게 주로 쓰이는 옵션은 all과 any가 있습니다. all의 경우는 아키텍쳐와 상관없이 사용할 수 있는 패키지만 빌드하는 옵션이고, any의 경우에는 빌드 패키지와 무관하게 모든 아키텍쳐에서 잘 컴파일 되어야함을 의미합니다.</li> <li>Depends : 의존성이 있는 패키지를 나타냅니다.</li> <li>Maintainer (필수) : maintainer 이름입니다.</li> <li>Description (필수) : 패키지 설명입니다.</li> </ul> <h2 id="구조">구조</h2> <p>데비안 패키지 폴더의 구조는 Root와 대응됩니다. 즉 내가 /usr/local/lib에 설치하고 싶다면 폴더의 구조를 같게 해주면 되는것이죠. 즉 Debian Package의 구조는 보통 아래처럼 구성됩니다.</p> <center> <img src="/images/Make-debian-package-tree.png" /> </center> <h2 id="postinst--postrm">postinst / postrm</h2> <p>usr/local/lib에 설치되어 있는 라이브러리를 활성하기 위해서는 <code class="highlighter-rouge">sudo ldconfig /usr/local/lib</code> 명령어를 실행시켜 주어야 합니다. 하지만 저희가 매번 apt 등을 이용하여 설치시에 이 명령어를 실행하는 것은 아니죠. 우리는 이것을 postinst 파일에 기록함으로서 자동 실행하게 만들 수 있습니다. 파일명에서 볼 수 있듯이 postinst은 설치가 끝 난 후에 자동으로 실행되는 스크립트 임을 알 수 있죠. 유사하게 패키지가 삭제된 후에 어떤 파일을 삭제 하고 싶다거나 라는 일이 있으면 같은 방식으로 스크립트를 postrm에 기술해 주면됩니다. 이때 두 스크립트를 실행하기 위해서 chmod 를 통해 권한(755)를 부여해 주어야합니다.</p> <h2 id="빌드설치">빌드/설치</h2> <p>빌드의 경우에는 <code class="highlighter-rouge">dpkg -b &lt;Directory&gt;</code> 옵션으로 데비안 패키지를 만들 수 있습니다. 다만 설치의 경우에 <code class="highlighter-rouge">dpkg -i &lt;Package&gt;</code> 를 이용하면 package에 걸려 있는 dependency를 check만 할 뿐 설치해 주지는 않죠 이를 해결하기 위해서는 <code class="highlighter-rouge">apt -i &lt;Package&gt;</code> 를 이용하여 설치해 주면 해결이 됩니다. apt는 dpkg 보다 높은 level의 tool 이므로 자동으로 dependency를 찾아주고 설치까지 해줍니다.</p> <h2 id="끝내면서">끝내면서</h2> <p>패키징을 처음 해보면서 드는 생각은 ‘생각보다는 할만하네?’ 였습니다. 새로운 것을 알아가는 과정은 언제나 즐겁네요.</p> <center> <b> "앞으로도 지나가는 모든일에 재미를 붙일 수 있도록 해봐야겠습니다." </b> </center> <hr /> <p>참고 : <a href="https://www.debian.org/doc/debian-policy/ch-controlfields.html">https://www.debian.org/doc/debian-policy/ch-controlfields.html</a></p> </div> <div class="pagination"> <span class="prev" > <a href="http://localhost:4000/Chrome-extension-2/"> &#xE000; 간단한 Chrome-extension 제작해보기 (2) </a> </span> </div> <div class="comments"> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'lntuition'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </article> </div> <div class="wrapper-footer"> <div class="container"> <footer class="footer"> <!-- Refer to https://codepen.io/ruandre/pen/howFi --> <ul class="svg-icon"> <li><a href="mailto:ekffu200098@gmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li> <li><a href="https://github.com/lntuition" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li> <li><a href="https://www.linkedin.com/in/sang-heon-jeon-994515190" class="icon-17 linkedin" title="LinkedIn"><svg viewBox="0 0 512 512"><path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z"/></svg><!--[if lt IE 9]><em>LinkedIn</em><![endif]--></a></li> </ul> <p>© 2019 lntuition. Powered by Jekyll & kiko-now</p> </footer> </div> </div> <!-- Google Analytics --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-144979789-1', 'auto'); ga('send', 'pageview', { 'page': '/Make-debian-package/', 'title': '간단한 Debian-Package 제작해보기' }); </script> <!-- End Google Analytics --> </body> </html>
